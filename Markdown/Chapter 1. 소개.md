# Chapter 1. 소개

* **그래픽스 파이프라인** 이 무엇일까? `OpenGL` 과 무슨 관계가 있을까?
* `OpenGL` 의 역사와 현재 상태
* 이 책에서 다룰 내용의 기본 개념


### OpenGL 의 개념

* 애플리케이션이 하부에서 동작하는 장치의 *그래픽스 서브시스템*에 접근하고 제어하기 위해 사용하는 ***인터페이스***
* 기반 플랫폼의 그래픽스 서브시스템의 세부 사항에 대해서 고민하는 대신에 독립적인 인터페이스를 제공해준다.
  이를 `API(Application Programming Interface)` 라고 한다.

## 1.1 OpenGL 과 그래픽스 파이프라인

* OpenGL 은 **파이프라인 분할**과 **데이터 병렬화**를 통해서 그래픽 렌더링과 프로세싱을 매우 빠르게 처리한다.
  목표는 애플리케이션과 하부 그래픽스 서브시스템의 **추상화 레이어**를 제공하는 것이다.
  추상화를 통해서 그래픽스 프로세스 유닛의 세부 정보를 알 수 없으며 하드웨어 독립적인 층을 제공한다.

* 다만 추상화는 너무 높지도 않아 프로그래머들이 기반 하드웨어에 접근하고 활용할 수 있도록 제공할 수 있다.
  이는 게임 엔진 등과 같이 하드웨어 계층에 직접 접근해야 할 경우에 쉽게 접근할 수 있는 인터페이스를 제공해준다.

* 현대의 GPU는 **쉐이더**라고 하는 작은 프로그램을 실행시키는 쉐이더 코어가 무수히 있다.

* 현대의 GPU는 각 스테이지로 나뉘어져 있으며

  1. 쉐이더
  2. 프로그래밍 가능한 단계
  3. 고정 단계

  로 나뉘어 있다.

대개 그래픽스 파이프라인은 다음과 같은 구조로 프로세싱이 진행된다.

![https://people.eecs.ku.edu/~jrmiller/Courses/672/InClass/MaterialsFromElsewhere/SimplifiedGraphicsPipeline_FromSuperBible.png](https://people.eecs.ku.edu/~jrmiller/Courses/672/InClass/MaterialsFromElsewhere/SimplifiedGraphicsPipeline_FromSuperBible.png)

* 둥근 박스는 **고정 함수** 스테이지이며,
  일반 박스는 **프로그래밍 가능** 스테이지이다. 프로그래밍 가능 스테이지에서는 제공한 쉐이더를 수행한다.

## 1.2 OpenGL 의 기원과 진화

### 1.2.1 OpenGL 코어 프로파일

2008년 부터 OpenGL은 두 가지 프로파일로 분리하게 되었다.

* **코어 프로파일 (core profile)** : 현대 그래픽스 하드웨어의 사양에 맞게끔 하위 호환성을 덜어낸 버전
* **호환성 프로파일 (compatibility profile)** : OpenGL 1.0 부터 시작해서 모든 하위 호환성을 유지한 버전

## 1.3 Primitive, Pipeline, Pixel

* OpenGL 렌더링 (그래픽 처리)의 기본 단위는 **Primitive** 이다.
  현재 많은 타입의 프리미티브를 지원 가능하다.
  하지만 세 가지 기본 렌더링 가능 타입은 *점, 선, 삼각형* 이다.

* 따라서 애플리케이션은 복잡한 표면(서피스)를 많은 수의 기본 프리미티브 (삼각형 형태)로 분할 한다.
  그 후에 OpenGL 로 보내서 **Rasterizer** 라고 부르는 하드웨어 가속기를 이용해 렌더링한다.

  > 이 때 삼각형이 많이 쓰이는 이유는, 삼각형은 항상 Convex (볼록) 하며, 폴리곤을 만드는 규칙이 쉽기 때문이다.

* **Rasterizer** 는 3 차원으로 표현된 삼각형을 화면에 그려질 일련의 픽셀로 변환하는 전용 하드웨어이다.

* **Vertex** 는 3 차원 좌표 공간 상의 하나의 *점*이다.

그래픽스 파이프라인은 두 개의 주요 파트로 분할된다.

* **Frontend** :: 버텍스와 프리미티브를 처리해서 점, 선, 삼각형을 구성하고 Rasterizer 로 보내는 역할을 한다.
  Primitive Assembly 라고도 한다. 래스터라이저 이후에는 지오메트리가 벡터에서 화면에 출력할 픽셀로 변환된다.
* **Backend** :: Depth, Stencil test, Fragment shading, Blending, 최종 이미지 갱신이 이뤄진다.